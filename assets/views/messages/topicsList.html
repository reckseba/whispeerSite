<div id="topicListWrap" data-scroll data-custom="distancePercentage < 0.5" data-at-custom="loadMoreTopics()">
	<ul id="topicList">
		<div id="topicListScroll">
			<li data-ng-repeat="topic in topics" id="{{topic.id}}" class="topic {{::topic.type}}" data-ng-class="{'unread': topic.unread, 'active': isActiveTopic(topic)}" data-accessible-click="loadActiveTopic(topic.id)">
				<div class="left">
					<div class="imgWrap" data-ng-if="::(topic.type == 'groupChat')">
						<img class="userimg" data-ng-repeat="partner in topic.partnersDisplay" data-ng-src="{{partner.basic.image}}" alt="{{partner.name}}" title="{{partner.name}}">
						<span data-ng-if="topic.remainingUser" title="{{topic.remainingUserTitle}}">+{{topic.remainingUser}}</span>
					</div>
					<div class="imgWrap" data-ng-if="::(topic.type == 'peerChat')">
						<userimage data-ng-repeat="partner in ::topic.partnersDisplay" data-user="partner">
					</div>
				</div>
				<div class="username">
					<span ng-repeat="partner in ::topic.partners">
						<span class="status" data-status="{{partner.online}}"></span>
						<strong data-ng-if="::(topic.partners.length <= 1)">{{partner.name}}</strong>
						<strong data-ng-if="::(topic.partners.length > 1)">{{partner.basic.shortname}}{{::($last?"":",")}}</strong>
					</span>
				</div>
				<div class="lastMessage">
					{{topic.latestMessage.data.text}}
				</div>
				<div class="time"><i class="fa fa-clock-o"></i> <span data-smart-date="topic.latestMessage.data.timestamp"></span></div>
				<div class="clear-fix"></div>
			</li>
		</div>
	</ul>
</div>
